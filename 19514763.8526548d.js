/*! For license information please see 19514763.8526548d.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{111:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return l})),t.d(n,"default",(function(){return p}));var r=t(1),o=t(6),a=(t(225),t(224)),i={id:"datamodel",title:"Data Model"},c={id:"intro/datamodel",title:"Data Model",description:"Graphback processes your data model to generate a server and client side using best patterns for production ready applications and reduces amount of boilerplate code needed to be added by you.",source:"@site/../docs/intro/datamodel.md",permalink:"/docs/next/intro/datamodel",editUrl:"https://github.com/aerogear/graphback/edit/master/website/../docs/intro/datamodel.md",version:"next",sidebar:"docs",previous:{title:"Running an API without code",permalink:"/docs/next/intro/graphqlserve"},next:{title:"Config",permalink:"/docs/next/intro/config"}},l=[{value:"Model",id:"model",children:[]},{value:"Primary key",id:"primary-key",children:[]},{value:"Relationships",id:"relationships",children:[{value:"OneToMany",id:"onetomany",children:[]},{value:"OneToOne",id:"onetoone",children:[]},{value:"ManyToMany",id:"manytomany",children:[]}]}],u={rightToc:l};function p(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Graphback processes your data model to generate a server and client side using best patterns for production ready applications and reduces amount of boilerplate code needed to be added by you.\nDevelopers can focus on data and application requirements by modeling them using a GraphQL SDL."),Object(a.b)("h2",{id:"model"},"Model"),Object(a.b)("p",null,"Graphback operates on GraphQL Schema types annotated with ",Object(a.b)("inlineCode",{parentName:"p"},"@model"),". Refer to ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/next/metadata"}),"this")," page for complete documentation of ",Object(a.b)("inlineCode",{parentName:"p"},"@model")," and other annotations.\nAdding this annotation to your type will enable Graphback to add additional elements to the schema and generate related code in JavaScript or TypeScript."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Note {\n  ...\n}\n')),Object(a.b)("h2",{id:"primary-key"},"Primary key"),Object(a.b)("p",null,"Graphback requires your data models to have one primary key field which is used to uniquely represent every object in the database."),Object(a.b)("p",null,"By default Graphback will use ",Object(a.b)("inlineCode",{parentName:"p"},"id: ID")," as the primary key."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Note {\n  id: ID!\n  ...\n}\n')),Object(a.b)("p",null,"You can set a custom primary key field using the ",Object(a.b)("inlineCode",{parentName:"p"},"@id")," field annotation."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Note {\n  id: ID!\n  """\n  @id\n  """\n  email: String\n}\n')),Object(a.b)("p",null,"Your data models can also contain custom types that are not Graphback models as shown below.\nHowever, it is expected that you provide the custom resolvers for your custom type as Graphback will not generate one for you."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Note {\n  id: ID!\n  """\n  @id\n  """\n  email: String\n\n  """\n  Field from a custom type that is not a Graphback model\n  """\n  comments: [Comment]\n}\n\n"""\nA custom type\n"""\ntype Comment {\n  id: ID!\n  text: String\n}\n')),Object(a.b)("h2",{id:"relationships"},"Relationships"),Object(a.b)("p",null,"Graphback provides support for one-to-many and one-to-one relationships."),Object(a.b)("h3",{id:"onetomany"},"OneToMany"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Note {\n  id: ID!\n  title: String!\n  """\n  @oneToMany field: \'note\'\n  """\n  comments: [Comment]\n}\n')),Object(a.b)("p",null,"This creates a one-to-many relationship between ",Object(a.b)("inlineCode",{parentName:"p"},"Note.comments")," and ",Object(a.b)("inlineCode",{parentName:"p"},"Comment.note"),". If ",Object(a.b)("inlineCode",{parentName:"p"},"Comment.note")," does not exist Graphback will generate it for you, otherwise you can define it yourself."),Object(a.b)("p",null,"By default this maps to ",Object(a.b)("inlineCode",{parentName:"p"},"comment.noteId")," in the underlying data source. Yon can customise this by adding ",Object(a.b)("inlineCode",{parentName:"p"},"key")," to the ",Object(a.b)("inlineCode",{parentName:"p"},"@oneToMany")," annotation:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Note {\n  id: ID!\n  title: String!\n  """\n  @oneToMany field: \'note\', key: \'note_id\'\n  """\n  comments: [Comment]\n}\n')),Object(a.b)("h3",{id:"onetoone"},"OneToOne"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Profile {\n  id: ID!\n  """\n  @oneToOne\n  """\n  user: User!\n}\n')),Object(a.b)("p",null,"This creates a one-sided relationship between the ",Object(a.b)("inlineCode",{parentName:"p"},"Profile")," and ",Object(a.b)("inlineCode",{parentName:"p"},"User")," models."),Object(a.b)("p",null,"By default this maps to ",Object(a.b)("inlineCode",{parentName:"p"},"profile.userId")," in the underlying data source. Yon can customise this by adding ",Object(a.b)("inlineCode",{parentName:"p"},"key")," to the ",Object(a.b)("inlineCode",{parentName:"p"},"@oneToOne")," annotation:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Profile {\n  id: ID!\n  """\n  @oneToOne key: \'user_id\'\n  """\n  user: User!\n}\n')),Object(a.b)("h3",{id:"manytomany"},"ManyToMany"),Object(a.b)("p",null,"To create a many-to-many relationship, add a model for your join table and use two one-to-many relationship mappings to create the relationship."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'""" \n@model \n"""\ntype Note {\n  id: ID!\n  title: String!\n  description: String\n  """\n  @oneToMany field: \'note\'\n  """\n  authors: [NoteAuthor]\n}\n\n"""\n@model\n"""\ntype NoteAuthor {\n  id: ID!\n}\n\n"""\n@model\n"""\ntype User {\n  id: ID!\n  name: String\n  """\n  @oneToMany field: \'author\'\n  """\n  notes: [NoteAuthor]\n}\n')))}p.isMDXComponent=!0},224:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return b}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=o.a.createContext({}),p=function(e){var n=o.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},s=function(e){var n=p(e.components);return o.a.createElement(u.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},f=o.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),s=p(t),f=r,b=s["".concat(i,".").concat(f)]||s[f]||d[f]||a;return t?o.a.createElement(b,c(c({ref:n},u),{},{components:t})):o.a.createElement(b,c({ref:n},u))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=f;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var u=2;u<a;u++)i[u]=t[u];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},225:function(e,n,t){"use strict";e.exports=t(226)},226:function(e,n,t){"use strict";var r=t(227),o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,c=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,p=o?Symbol.for("react.provider"):60109,s=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.forward_ref"):60112,f=o?Symbol.for("react.suspense"):60113,b=o?Symbol.for("react.memo"):60115,y=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function j(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||O}function v(){}function w(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||O}j.prototype.isReactComponent={},j.prototype.setState=function(e,n){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,n,"setState")},j.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=j.prototype;var k=w.prototype=new v;k.constructor=w,r(k,j.prototype),k.isPureReactComponent=!0;var N={current:null},S=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function P(e,n,t){var r,o={},i=null,c=null;if(null!=n)for(r in void 0!==n.ref&&(c=n.ref),void 0!==n.key&&(i=""+n.key),n)S.call(n,r)&&!C.hasOwnProperty(r)&&(o[r]=n[r]);var l=arguments.length-2;if(1===l)o.children=t;else if(1<l){for(var u=Array(l),p=0;p<l;p++)u[p]=arguments[p+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:a,type:e,key:i,ref:c,props:o,_owner:N.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var _=/\/+/g,E=[];function T(e,n,t,r){if(E.length){var o=E.pop();return o.result=e,o.keyPrefix=n,o.func=t,o.context=r,o.count=0,o}return{result:e,keyPrefix:n,func:t,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>E.length&&E.push(e)}function I(e,n,t){return null==e?0:function e(n,t,r,o){var c=typeof n;"undefined"!==c&&"boolean"!==c||(n=null);var l=!1;if(null===n)l=!0;else switch(c){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case a:case i:l=!0}}if(l)return r(o,n,""===t?"."+M(n,0):t),1;if(l=0,t=""===t?".":t+":",Array.isArray(n))for(var u=0;u<n.length;u++){var p=t+M(c=n[u],u);l+=e(c,p,r,o)}else if(null===n||"object"!=typeof n?p=null:p="function"==typeof(p=m&&n[m]||n["@@iterator"])?p:null,"function"==typeof p)for(n=p.call(n),u=0;!(c=n.next()).done;)l+=e(c=c.value,p=t+M(c,u++),r,o);else if("object"===c)throw r=""+n,Error(h(31,"[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r,""));return l}(e,"",n,t)}function M(e,n){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return n[e]}))}(e.key):n.toString(36)}function R(e,n){e.func.call(e.context,n,e.count++)}function $(e,n,t){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,n,e.count++),Array.isArray(e)?q(e,r,t,(function(e){return e})):null!=e&&(x(e)&&(e=function(e,n){return{$$typeof:a,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||n&&n.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+t)),r.push(e))}function q(e,n,t,r,o){var a="";null!=t&&(a=(""+t).replace(_,"$&/")+"/"),I(e,$,n=T(n,a,r,o)),D(n)}var A={current:null};function G(){var e=A.current;if(null===e)throw Error(h(321));return e}var U={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:N,IsSomeRendererActing:{current:!1},assign:r};n.Children={map:function(e,n,t){if(null==e)return e;var r=[];return q(e,r,null,n,t),r},forEach:function(e,n,t){if(null==e)return e;I(e,R,n=T(null,null,n,t)),D(n)},count:function(e){return I(e,(function(){return null}),null)},toArray:function(e){var n=[];return q(e,n,null,(function(e){return e})),n},only:function(e){if(!x(e))throw Error(h(143));return e}},n.Component=j,n.Fragment=c,n.Profiler=u,n.PureComponent=w,n.StrictMode=l,n.Suspense=f,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,n.cloneElement=function(e,n,t){if(null==e)throw Error(h(267,e));var o=r({},e.props),i=e.key,c=e.ref,l=e._owner;if(null!=n){if(void 0!==n.ref&&(c=n.ref,l=N.current),void 0!==n.key&&(i=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(p in n)S.call(n,p)&&!C.hasOwnProperty(p)&&(o[p]=void 0===n[p]&&void 0!==u?u[p]:n[p])}var p=arguments.length-2;if(1===p)o.children=t;else if(1<p){u=Array(p);for(var s=0;s<p;s++)u[s]=arguments[s+2];o.children=u}return{$$typeof:a,type:e.type,key:i,ref:c,props:o,_owner:l}},n.createContext=function(e,n){return void 0===n&&(n=null),(e={$$typeof:s,_calculateChangedBits:n,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},n.createElement=P,n.createFactory=function(e){var n=P.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:d,render:e}},n.isValidElement=x,n.lazy=function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},n.memo=function(e,n){return{$$typeof:b,type:e,compare:void 0===n?null:n}},n.useCallback=function(e,n){return G().useCallback(e,n)},n.useContext=function(e,n){return G().useContext(e,n)},n.useDebugValue=function(){},n.useEffect=function(e,n){return G().useEffect(e,n)},n.useImperativeHandle=function(e,n,t){return G().useImperativeHandle(e,n,t)},n.useLayoutEffect=function(e,n){return G().useLayoutEffect(e,n)},n.useMemo=function(e,n){return G().useMemo(e,n)},n.useReducer=function(e,n,t){return G().useReducer(e,n,t)},n.useRef=function(e){return G().useRef(e)},n.useState=function(e){return G().useState(e)},n.version="16.13.1"},227:function(e,n,t){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,n){for(var t,c,l=i(e),u=1;u<arguments.length;u++){for(var p in t=Object(arguments[u]))o.call(t,p)&&(l[p]=t[p]);if(r){c=r(t);for(var s=0;s<c.length;s++)a.call(t,c[s])&&(l[c[s]]=t[c[s]])}}return l}}}]);